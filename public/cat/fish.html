<!doctype html>
<html lang="en">
<head>
    <title>Fish</title>
    <meta name="apple-mobile-web-app-capable" content= "yes">
    <script src="./libraries/p5.min.js"></script>
    <script src="./libraries/p5.sound.min.js"></script>
    <script src="./libraries/addScreenPositionFunction.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://unpkg.com/p5.collide2d"></script>
    <script src="./libraries/p5.gif.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap');
    </style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div id="slider-container" style="width: 100%; z-index: 9; position: absolute;">
        <p style="font-family: 'Noto Sans KR', sans-serif; margin-left: 1%; margin-bottom: -0.2%;">
            Slide all the way to quit!
            <i class="fa fa-arrow-right" aria-hidden="true"></i>
            <i class="fa fa-arrow-right" aria-hidden="true"></i>
            <i class="fa fa-arrow-right" aria-hidden="true"></i>
        </p>
        <input class="mdl-slider mdl-js-slider" id="slider" style="width: 25%; margin-left: 1%;" type="range" min="0" max="100" value="0" tabindex="0">
    </div>
    <audio id="audio_container" controls src=""></audio>
    <script>
    let that = this;
    document.body.addEventListener('touchstart', function(evt) //First touch event on the screen will trigger this
        { 
            console.log("Audio Setup for iOS:", that.state.allow_sound);
            if(!that.state.allow_sound) //False on initial load
            {
                var audio1 = document.getElementById("audio_container");
                audio1.load();  
                audio1.play();                             

                that.setState({allow_sound : true})
            }
    });
    </script>
    <script>
        let sliderInput = document.getElementById("slider");
        if (sliderInput.addEventListener) {
            sliderInput.addEventListener('input', goBack);
        }

        function goBack(e) {
            let value = sliderInput.value;
            console.log(value);
            if (value > 0) {

            }
            if (value == 100){
                window.location.href='./cat-screen.html';
            }
        }
    </script>
    <script src="./fish-sketch.js"></script>
    <!--This is a test for nedb testing-->
    <script>
        getData();
        async function getData() {
            const response = await fetch('/test');
            const data = await response.json();
            console.log(data);
        }
    </script>
    <!---------------------------------->

</body>
</html>